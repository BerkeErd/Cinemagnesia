@using Microsoft.AspNetCore.Identity
@using Cinemagnesia.Domain.Domain.Entities.Concrete;
@inject UserManager<ApplicationUser> UserManager
<div class="container">
    <div class="row">
        <div class="col-lg-8 offset-lg-2">
            <form method="post" asp-action="CreateProductorRequest" asp-controller="ProductorRequest" class="form">
                <div class="form-group">
                    <label for="companyName">Şirket Adı:</label>
                    <input type="text" id="companyName" name="companyName" class="form-control" required />
                </div>
                <div class="form-group">
                    <label for="TaxNumber">Vergi Numarası:</label>
                    <input type="text" id="TaxNumber" name="TaxNumber" class="form-control" required />
                </div>
                <div class="form-group">
                    <label for="foundDate">Kuruluş Tarihi:</label>
                    <input type="date" id="foundDate" name="foundDate" class="form-control" required />
                </div>
                <div class="form-group">
                    <input type="hidden" id="userId" name="applicationUserId" value="@UserManager.GetUserAsync(User).Result.Id" />
                    <input type="hidden" id="email" name="email" value="@UserManager.GetUserAsync(User).Result.Email" />
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary">Oluştur</button>
                </div>
            </form>
        </div>
    </div>
    
</div>
@if (ViewBag.response != null)
    {
        <script>
            var response = @Html.Raw(Json.Serialize(ViewBag.response));
        </script>
    }
@section scripts{
    <script>
        $(document).ready(function () {
            var jsonObj = JSON.parse(response);
            console.log(jsonObj)
            if (jsonObj != null && jsonObj.Message != "") {
                console.log("test");
                Swal.fire(
                    'Tebrikler.',
                    jsonObj.Message + ' - ' + jsonObj.Email,
                    
                    'success'
                );
            }
        });

    </script>
}